# CommandButton

The command button executes the commands we were discussing in the last release:
* copy
* delete
* message
* set
```typescript
   copyLine1ToLine2: { control: "CommandButton", command: { command: 'copy', from: '~/display/line1', to: '~/display/line2' } }, 
```

# Can use html in text
In most places where we could use the {} notation we can now use HTML. For example
* Labels
* Page Titles
* Table titles

Be aware that any data inside the {} (i.e. from the operator) will not be turned into HTML to avoid injection attacks. The 
way this is done is crude and probably needs reviewing and improving (it just changes <  and > into xml entities)

# allowNull
Our data structures defined by dataDs didn't use to handle nulls well. For example we couldn't specify `null` as
an emptyValue, and the type generated didn't allow nulls.

Now we can if we want add `allowNull` which says 'it's OK for this to be null'. this is mostly of value when you are 
getting things from the backend that might return null.

```typescript
        dropdownWithNull: { dataDD: Object.assign(Object.assign({}, singleOccupation_dataD_1.yesNoDD), { emptyValue: null, allowNull: true }) },
        dropdownWithUndefined: { dataDD: Object.assign(Object.assign({}, singleOccupation_dataD_1.yesNoDD), { emptyValue: undefined, allowUndefined: true }) },

```

# ifNull & emptyStringCountsAsNull
When we send data to the back end, we discovered that we often had to handle 'null' data differently to normal data. Basically we needed
a default value. In one of our endpoints we needed to put a single space into a database if the specified value was null. It is also the 
case that if the data is sent as an empty string sometimes we need to treat that the same as a null (i.e. use the default value)

Here we see an example of it in use
```typescript
  {
        type: 'sql', params: [
          { type: 'input', javaType: 'Object', name: 'accountId', ifNull: ' ' },
          { type: 'body', javaType: 'String', path: 'a.b', ifNull: ' ' },
          { type: 'input', javaType: 'Object', name: 'accountId', ifNull: ' ', emptyStringCountsAsNull: true },
          { type: 'body', javaType: 'String', path: 'a.b', ifNull: ' ', emptyStringCountsAsNull: true }
        ], schema: onlySchema, sql: 'insert sqlBank1'
      },
```

Currently we don't do this for the autogenerated sql, but if we need to we will add the same functionality


# headerIfEmpty for SelectedItem
When we have an array and we are displaying `Data # 1 / 4`, this works well. Until it is `Data # 1 / 0`. 
`headerIfEmpty` replaces the `1 / 0` text

If it turns out we want a little more, we might adjust this next week

# DisplayStringWithLookup
Note that this is just display: no changing of the text. We can have the {} notation, and we can have html in the code
```typescript
    displayStringWithLookup: {
      dataDD: { ...StringDD, display: DisplayStringWithLookupCD, emptyValue: 'A' },
      displayParams: { lookup: { A: 'The value was A', B: 'The value was B' } }
    },
```

# LayoutCD

We have added: title/rightHandTitle and optional classes for them.

Note that the title and rightHandTitle can use the {} language to display data, and can have html

```typescript
export const LayoutCd: DisplayCompD = {
  params: {
    ...
    details: { paramType: 'string', needed: 'yes' },
    title: { paramType: 'string', needed: 'no' },
    titleClassName: { paramType: 'string', needed: 'no' },
    rightHandTitle: { paramType: 'string', needed: 'no' },
    rightHandClassName: { paramType: 'string', needed: 'no' },
  },
}
```

# WithTextLayoutCD

Note that the text can use the {} language to display data, and have html in the text

```typescript
layout: { component: WithTextLayoutCD, displayParams: { text: 'Some Exciting text' } },
```

# cssDirectory
If you put files in the css directory they will be  included in index.html.

# Bugs
* We need to 'check the fetchers' after we have done a rest or fetch (for example a load after a delete)
  * Note that we only check an extra 'once'. If we still have issues we'll review what to do
* generating sql added extra ""s
* generating logging statements sometimes added an extra ','

# Migration guide
If you had new lines (\n) in your titles or labels they will now work differently. You will need to replace them with &lt;br&gt;

